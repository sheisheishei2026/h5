<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML5 列表展示</title>
    <link rel="stylesheet" href="style.css">
    <meta name="theme-color" content="#317EFB">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>
    <header>
        <h1>HTML5 API 演示</h1>
    </header>
    
    <main>
        <!-- 原有的列表功能 -->
        <section class="card">
            <h2>待办列表</h2>
            <div class="input-group">
                <input type="text" id="newItem" placeholder="添加新项目...">
                <button id="addBtn">添加</button>
            </div>
            <ul id="listContainer">
                <!-- 列表项将在这里动态生成 -->
            </ul>
        </section>

        <!-- 相机与相册 -->
        <section class="card">
            <h2>📷 相机与相册</h2>
            <div class="api-demo">
                <p>
                    <label class="btn-label" for="cameraInput">📸 拍照</label>
                    <input type="file" id="cameraInput" accept="image/*" capture="environment" style="display:none">
                    
                    <label class="btn-label" for="galleryInput">🖼️ 选图</label>
                    <input type="file" id="galleryInput" accept="image/*" style="display:none">
                </p>
                <div id="imagePreviewContainer"></div>
            </div>
        </section>

        <!-- 文件系统 -->
        <section class="card">
            <h2>📂 本地文件目录展示</h2>
            <div class="api-demo">
                <!-- 隐藏的 input，用于选择文件夹 -->
                <input type="file" id="folderInput" webkitdirectory directory multiple style="display: none;">
                
                <button id="dirBtn">选择并展示文件夹目录</button>
                
                <div id="dirOutput" class="output-box" style="max-height: 300px; overflow-y: auto; text-align: left;">
                    <p style="color: #999; text-align: center;">暂无数据，请选择一个文件夹</p>
                </div>
                <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                    注：出于安全限制，H5 无法直接扫描您的根目录。您必须手动选择一个文件夹，网页才有权读取并展示其结构。
                </p>
            </div>
        </section>

        <!-- 音乐播放 -->
        <section class="card">
            <h2>🎵 音乐播放与录音</h2>
            <div class="api-demo">
                <label class="btn-label" for="audioInput">📂 选择音乐文件</label>
                <input type="file" id="audioInput" accept="audio/*" style="display:none">
                <br>
                <div class="recorder-controls" style="margin-top: 15px; border-top: 1px dashed #ddd; padding-top: 15px;">
                    <button id="startRecordBtn">🎤 开始录音</button>
                    <button id="stopRecordBtn" disabled style="background-color: #ccc;">⏹ 停止录音</button>
                    <div id="recordingStatus" style="margin-top: 5px; color: #666; font-size: 14px;"></div>
                </div>
                <br>
                <div style="margin-top: 10px;">
                    <label for="volumeSlider">播放音量:</label>
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1" style="width: 100%;">
                </div>
                <audio id="audioPlayer" controls style="width: 100%; display: none; margin-top: 10px;"></audio>
                <p id="audioName"></p>
            </div>
        </section>

        <!-- 蓝牙与设备 -->
        <section class="card">
            <h2>🔵 蓝牙设备</h2>
            <div class="api-demo">
                <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">
                    注：Web 无法直接开关系统蓝牙或调节系统音量，但可以连接附近的 BLE 设备。
                </p>
                <button id="btBtn">🔍 扫描蓝牙设备</button>
                <div id="btOutput" class="output-box">等待操作...</div>
            </div>
        </section>

        <!-- 通知与振动 -->
        <section class="card">
            <h2>🔔 通知与振动</h2>
            <div class="api-demo">
                <h3>通知 API</h3>
                <button id="notifyBtn">📨 发送通知</button>
                <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                    点击后请"允许"通知权限。
                </p>
                
                <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">
                
                <h3>振动 API</h3>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="vibrateBtn">📳 振动一次 (200ms)</button>
                    <button id="vibratePatternBtn">💓 心跳模式</button>
                    <button id="vibrateStopBtn" style="background-color: #ff4444;">🛑 停止</button>
                </div>
                <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                    注：振动功能通常仅在 Android 手机上有效，iOS Safari 暂不支持。
                </p>
            </div>
        </section>

        <!-- 地理定位 -->
        <section class="card">
            <h2>📍 地理定位</h2>
            <div class="api-demo">
                <button id="geoBtn">获取当前位置</button>
                <div id="geoOutput" class="output-box">等待获取...</div>
            </div>
        </section>

        <!-- 传感器 -->
        <section class="card">
            <h2>🧭 传感器 (加速度)</h2>
            <div class="api-demo">
                <button id="sensorBtn">开启传感器权限</button>
                <div id="sensorOutput" class="output-box">
                    X: <span id="accX">0</span><br>
                    Y: <span id="accY">0</span><br>
                    Z: <span id="accZ">0</span>
                </div>
                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ddd; text-align: center;">
                    <a href="game.html" style="display: inline-block; text-decoration: none;">
                        <button style="background: #ff9800; font-weight: bold;">🎮 去玩滚球小游戏</button>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
</body>
</html>
