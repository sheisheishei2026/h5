<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>H5è®¾å¤‡èƒ½åŠ›è°ƒç”¨</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=yes">
    <!-- å¼•å…¥jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .card-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            font-size: 24px;
        }

        .btn {
            width: 100%;
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-secondary:hover {
            box-shadow: 0 8px 20px rgba(245, 87, 108, 0.4);
        }

        .result-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            min-height: 60px;
            max-height: 200px;
            overflow-y: auto;
        }

        .result-box.empty {
            color: #999;
            font-style: italic;
        }

        .orientation-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .orientation-item {
            background: #e7f3ff;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .orientation-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .orientation-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .photo-preview {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }

        .photo-preview.show {
            display: block;
        }

        .battery-visual {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .battery-bar {
            width: 100%;
            height: 40px;
            background: #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .battery-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
            transition: all 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .battery-fill.low {
            background: linear-gradient(90deg, #ff5252 0%, #ff7043 100%);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .button-group .btn {
            flex: 1;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #4caf50;
            color: white;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }

        .status-badge.error {
            background: #f44336;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .vibrating {
            animation: pulse 0.3s ease;
        }

        .motion-display {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .motion-item {
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .motion-label {
            font-size: 11px;
            color: #00796b;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .motion-value {
            font-size: 18px;
            font-weight: bold;
            color: #00897b;
        }

        .speech-control {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .speech-btn {
            flex: 1;
            padding: 10px;
            background: linear-gradient(135deg, #4fc3f7 0%, #0288d1 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .speech-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(2, 136, 209, 0.3);
        }

        .speech-btn.recording {
            background: linear-gradient(135deg, #ef5350 0%, #e53935 100%);
            animation: pulse 1s infinite;
        }

        .fullscreen-demo {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
        }

        .fullscreen-demo.active {
            display: flex;
        }

        .fullscreen-demo h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .fullscreen-demo button {
            padding: 15px 30px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        .notification-demo {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 10000;
            animation: slideIn 0.3s ease;
        }

        .notification-demo.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .share-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .wake-lock-status {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 16px;
            background: #e8f5e9;
            border-radius: 20px;
            font-size: 14px;
            color: #2e7d32;
            font-weight: bold;
        }

        .wake-lock-status.active {
            background: #fff3e0;
            color: #ef6c00;
        }

        .page-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0);
        }

        .page-header.scrolled {
            padding: 12px 20px;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
        }

        .page-header h1 {
            margin: 0;
            transition: all 0.3s ease;
        }

        .page-header.scrolled h1 {
            font-size: 20px;
        }

        .touch-visual {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            min-height: 100px;
            position: relative;
            overflow: hidden;
        }

        .touch-point {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.6) 0%, rgba(102, 126, 234, 0) 70%);
            border-radius: 50%;
            pointer-events: none;
            animation: touchFade 0.6s ease-out forwards;
        }

        @keyframes touchFade {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }

        .haptic-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .haptic-btn {
            padding: 15px;
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .haptic-btn:active {
            transform: scale(0.95);
        }

        .canvas-draw {
            width: 100%;
            height: 200px;
            background: white;
            border-radius: 8px;
            border: 2px dashed #ddd;
            margin-top: 10px;
            touch-action: none;
        }

        .sensor-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .sensor-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .sensor-value {
            font-size: 20px;
            font-weight: bold;
            color: #d84315;
            margin-top: 5px;
        }

        .gesture-area {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            font-size: 18px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            user-select: none;
            touch-action: none;
        }

        .scroll-indicator {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 100px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }

        .scroll-progress {
            width: 100%;
            height: 0%;
            background: white;
            transition: height 0.1s ease;
        }

        .install-prompt {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
        }

        .install-prompt.show {
            display: block;
        }

        .qr-result {
            margin-top: 10px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 8px;
            word-break: break-all;
            display: none;
        }

        .qr-result.show {
            display: block;
        }

        .parallax-card {
            transform-style: preserve-3d;
            transition: transform 0.1s ease;
        }

        .card-content {
            transform: translateZ(20px);
        }

        .voice-wave {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            height: 40px;
            margin-top: 10px;
        }

        .wave-bar {
            width: 4px;
            height: 10px;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            animation: wave 0.6s ease-in-out infinite;
        }

        .wave-bar:nth-child(1) { animation-delay: 0s; }
        .wave-bar:nth-child(2) { animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { animation-delay: 0.4s; }
        .wave-bar:nth-child(6) { animation-delay: 0.3s; }
        .wave-bar:nth-child(7) { animation-delay: 0.2s; }
        .wave-bar:nth-child(8) { animation-delay: 0.1s; }

        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 35px; }
        }

        .voice-wave.hidden {
            display: none;
        }

        .media-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .media-btn {
            flex: 1;
            padding: 8px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }

        .video-preview {
            width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }

        .video-preview.show {
            display: block;
        }

        .gyro-visual {
            width: 100px;
            height: 100px;
            margin: 20px auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transform-style: preserve-3d;
            transition: transform 0.1s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .connection-status {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4caf50;
            margin-right: 8px;
            animation: pulse-dot 2s infinite;
        }

        .connection-status.offline {
            background: #f44336;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .feature-badge {
            display: inline-block;
            padding: 3px 8px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            font-size: 11px;
            color: #667eea;
            margin-left: 8px;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .stat-item {
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #00695c;
        }

        .stat-label {
            font-size: 11px;
            color: #00796b;
            margin-top: 3px;
        }

        .keyboard-visual {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: monospace;
            min-height: 60px;
        }

        .share-preview {
            margin-top: 10px;
            padding: 12px;
            background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);
            border-radius: 8px;
            border-left: 4px solid #0288d1;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }

        .bluetooth-device {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 6px;
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nfc-tag {
            background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
            color: #f57f17;
        }

        .usb-device {
            background: #f3e5f5;
            padding: 10px;
            border-radius: 6px;
            margin: 5px 0;
            border-left: 3px solid #9c27b0;
        }

        .payment-status {
            padding: 15px;
            background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
            border-radius: 8px;
            margin-top: 10px;
            text-align: center;
        }

        .contact-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            border: 1px solid #e0e0e0;
        }

        .pressure-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }

        .pressure-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50 0%, #ff5722 100%);
            transition: width 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .gamepad-visual {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }

        .gamepad-btn {
            background: #e0e0e0;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-size: 11px;
            transition: all 0.1s ease;
        }

        .gamepad-btn.pressed {
            background: #667eea;
            color: white;
            transform: scale(0.95);
        }

        .geofence-map {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }

        .location-dot {
            width: 20px;
            height: 20px;
            background: #f44336;
            border-radius: 50%;
            position: absolute;
            animation: pulse-location 2s infinite;
        }

        @keyframes pulse-location {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
            }
            50% {
                box-shadow: 0 0 0 15px rgba(244, 67, 54, 0);
            }
        }

        .ambient-temp {
            font-size: 48px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .barcode-scanner {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }

        .scan-line {
            width: 100%;
            height: 2px;
            background: #4caf50;
            box-shadow: 0 0 10px #4caf50;
            position: absolute;
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
    </style>
</head>
<body>
    <!-- é¡µé¢å¤´éƒ¨ - æ»šåŠ¨è”åŠ¨æ•ˆæœ -->
    <div class="page-header" id="pageHeader">
        <h1>ğŸ“± H5è®¾å¤‡èƒ½åŠ›è°ƒç”¨</h1>
    </div>

    <!-- æ»šåŠ¨è¿›åº¦æŒ‡ç¤ºå™¨ -->
    <div class="scroll-indicator">
        <div class="scroll-progress" id="scrollProgress"></div>
    </div>

    <div class="container">

        <!-- ç›¸æœºåŠŸèƒ½ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“·</span>
                <span>ç›¸æœºæ‹ç…§</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="openCamera()">æ‹ç…§</button>
                <button class="btn btn-secondary" onclick="openAlbum()">ç›¸å†Œ</button>
            </div>
            <input type="file" id="cameraInput" accept="image/*" capture="camera" style="display:none" onchange="handlePhoto(event)">
            <input type="file" id="albumInput" accept="image/*" style="display:none" onchange="handlePhoto(event)">
            <img id="photoPreview" class="photo-preview" alt="ç…§ç‰‡é¢„è§ˆ">
        </div>

        <!-- åœ°ç†ä½ç½® -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“</span>
                <span>åœ°ç†ä½ç½®</span>
            </div>
            <button class="btn" onclick="getLocation()">è·å–å½“å‰ä½ç½®</button>
            <div id="locationResult" class="result-box empty">ç‚¹å‡»æŒ‰é’®è·å–ä½ç½®ä¿¡æ¯</div>
        </div>

        <!-- é™€èºä»ª/é‡åŠ›æ„Ÿåº” -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ¯</span>
                <span>è®¾å¤‡æ–¹å‘</span>
                <span class="feature-badge">3D</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="startOrientation()">å¼€å§‹ç›‘æµ‹</button>
                <button class="btn btn-secondary" onclick="stopOrientation()">åœæ­¢ç›‘æµ‹</button>
            </div>
            <div class="gyro-visual" id="gyroVisual">ğŸ“±</div>
            <div class="orientation-display">
                <div class="orientation-item">
                    <div class="orientation-label">Alpha (Zè½´)</div>
                    <div class="orientation-value" id="alpha">0Â°</div>
                </div>
                <div class="orientation-item">
                    <div class="orientation-label">Beta (Xè½´)</div>
                    <div class="orientation-value" id="beta">0Â°</div>
                </div>
                <div class="orientation-item">
                    <div class="orientation-label">Gamma (Yè½´)</div>
                    <div class="orientation-value" id="gamma">0Â°</div>
                </div>
                <div class="orientation-item">
                    <div class="orientation-label">å±å¹•æ–¹å‘</div>
                    <div class="orientation-value" id="screenOrientation">ç«–å±</div>
                </div>
            </div>
        </div>

        <!-- éœ‡åŠ¨ -->
        <div class="card" id="vibrateCard">
            <div class="card-title">
                <span class="card-icon">ğŸ“³</span>
                <span>è®¾å¤‡éœ‡åŠ¨</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="vibrateShort()">çŸ­éœ‡åŠ¨</button>
                <button class="btn" onclick="vibrateLong()">é•¿éœ‡åŠ¨</button>
                <button class="btn btn-secondary" onclick="vibratePattern()">èŠ‚å¥éœ‡åŠ¨</button>
            </div>
        </div>

        <!-- ç”µæ± çŠ¶æ€ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ”‹</span>
                <span>ç”µæ± çŠ¶æ€</span>
            </div>
            <button class="btn" onclick="getBattery()">è·å–ç”µæ± ä¿¡æ¯</button>
            <div class="battery-visual" id="batteryVisual" style="display:none;">
                <div class="battery-bar">
                    <div class="battery-fill" id="batteryFill">0%</div>
                </div>
                <div id="batteryInfo" class="result-box" style="margin-top:10px;"></div>
            </div>
        </div>

        <!-- è®¾å¤‡ä¿¡æ¯ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“²</span>
                <span>è®¾å¤‡ä¿¡æ¯</span>
            </div>
            <button class="btn" onclick="getDeviceInfo()">è·å–è®¾å¤‡ä¿¡æ¯</button>
            <div id="deviceInfo" class="result-box empty">ç‚¹å‡»æŒ‰é’®è·å–è®¾å¤‡ä¿¡æ¯</div>
        </div>

        <!-- ç½‘ç»œçŠ¶æ€ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“¶</span>
                <span>ç½‘ç»œçŠ¶æ€</span>
                <span class="connection-status" id="connectionStatus"></span>
            </div>
            <button class="btn" onclick="getNetworkInfo()">è·å–ç½‘ç»œä¿¡æ¯</button>
            <div id="networkInfo" class="result-box empty">ç‚¹å‡»æŒ‰é’®è·å–ç½‘ç»œçŠ¶æ€</div>
            <div class="stats-grid" style="margin-top: 10px;">
                <div class="stat-item">
                    <div class="stat-value" id="pingTime">-</div>
                    <div class="stat-label">å»¶è¿Ÿ(ms)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="downSpeed">-</div>
                    <div class="stat-label">ä¸‹è¡Œé€Ÿåº¦</div>
                </div>
            </div>
        </div>

        <!-- å‰ªè´´æ¿ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“‹</span>
                <span>å‰ªè´´æ¿</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="copyToClipboard()">å¤åˆ¶æ–‡æœ¬</button>
                <button class="btn btn-secondary" onclick="readClipboard()">è¯»å–å‰ªè´´æ¿</button>
            </div>
            <div id="clipboardResult" class="result-box empty">å‰ªè´´æ¿æ“ä½œç»“æœ</div>
        </div>

        <!-- é‡åŠ›æ„Ÿåº”/åŠ é€Ÿåº¦ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ¢</span>
                <span>é‡åŠ›æ„Ÿåº”</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="startMotion()">å¼€å§‹ç›‘æµ‹</button>
                <button class="btn btn-secondary" onclick="stopMotion()">åœæ­¢ç›‘æµ‹</button>
            </div>
            <div class="motion-display">
                <div class="motion-item">
                    <div class="motion-label">Xè½´åŠ é€Ÿåº¦</div>
                    <div class="motion-value" id="motionX">0.0</div>
                </div>
                <div class="motion-item">
                    <div class="motion-label">Yè½´åŠ é€Ÿåº¦</div>
                    <div class="motion-value" id="motionY">0.0</div>
                </div>
                <div class="motion-item">
                    <div class="motion-label">Zè½´åŠ é€Ÿåº¦</div>
                    <div class="motion-value" id="motionZ">0.0</div>
                </div>
            </div>
        </div>

        <!-- è¯­éŸ³è¯†åˆ« -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ¤</span>
                <span>è¯­éŸ³è¯†åˆ«</span>
                <span class="feature-badge">AI</span>
            </div>
            <div class="speech-control">
                <button class="speech-btn" id="speechBtn" onclick="toggleSpeech()">å¼€å§‹å½•éŸ³</button>
                <button class="speech-btn" onclick="speakText()">è¯­éŸ³æ’­æŠ¥</button>
            </div>
            <div class="voice-wave hidden" id="voiceWave">
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
                <div class="wave-bar"></div>
            </div>
            <div id="speechResult" class="result-box empty">è¯­éŸ³è¯†åˆ«ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
        </div>

        <!-- å…¨å±æ¨¡å¼ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ–¥ï¸</span>
                <span>å…¨å±æ¨¡å¼</span>
            </div>
            <button class="btn" onclick="toggleFullscreen()">è¿›å…¥å…¨å±</button>
        </div>

        <!-- å±å¹•å”¤é†’é” -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ’¡</span>
                <span>å±å¹•å¸¸äº®</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="requestWakeLock()">ä¿æŒå±å¹•å¸¸äº®</button>
                <button class="btn btn-secondary" onclick="releaseWakeLock()">é‡Šæ”¾å¸¸äº®</button>
            </div>
            <span id="wakeLockStatus" class="wake-lock-status">âŒ æœªæ¿€æ´»</span>
        </div>

        <!-- åˆ†äº«åŠŸèƒ½ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“¤</span>
                <span>ç³»ç»Ÿåˆ†äº«</span>
            </div>
            <div class="share-options">
                <button class="btn" onclick="shareText()">åˆ†äº«æ–‡æœ¬</button>
                <button class="btn" onclick="shareUrl()">åˆ†äº«é“¾æ¥</button>
            </div>
            <div id="shareResult" class="result-box empty" style="margin-top:10px;">åˆ†äº«ç»“æœ</div>
        </div>

        <!-- é€šçŸ¥æƒé™ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ””</span>
                <span>ç³»ç»Ÿé€šçŸ¥</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="requestNotification()">è¯·æ±‚æƒé™</button>
                <button class="btn btn-secondary" onclick="sendNotification()">å‘é€é€šçŸ¥</button>
            </div>
            <div id="notificationResult" class="result-box empty">é€šçŸ¥çŠ¶æ€</div>
        </div>

        <!-- å±å¹•äº®åº¦ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">â˜€ï¸</span>
                <span>å±å¹•äº®åº¦</span>
            </div>
            <button class="btn" onclick="adjustBrightness()">è°ƒæ•´äº®åº¦</button>
            <div id="brightnessResult" class="result-box empty">äº®åº¦ä¿¡æ¯</div>
        </div>

        <!-- è§¦æ‘¸äº‹ä»¶ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ‘†</span>
                <span>å¤šç‚¹è§¦æ‘¸</span>
            </div>
            <div class="touch-visual" id="touchVisual">
                <div style="text-align: center; padding: 30px; color: #999;">åœ¨æ­¤åŒºåŸŸè§¦æ‘¸å±å¹•</div>
            </div>
            <div id="touchInfo" class="result-box empty" style="margin-top: 10px;">è§¦æ‘¸ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
        </div>

        <!-- æ‰‹åŠ¿è¯†åˆ« -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">âœ‹</span>
                <span>æ‰‹åŠ¿è¯†åˆ«</span>
            </div>
            <div class="gesture-area" id="gestureArea">
                ğŸ‘† æ»‘åŠ¨è¯•è¯•
            </div>
            <div id="gestureResult" class="result-box empty" style="margin-top: 10px;">æ‰‹åŠ¿è¯†åˆ«ç»“æœ</div>
        </div>

        <!-- è§¦è§‰åé¦ˆ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ®</span>
                <span>è§¦è§‰åé¦ˆï¼ˆHapticï¼‰</span>
            </div>
            <div class="haptic-demo">
                <button class="haptic-btn" onclick="hapticLight()">è½»è§¦</button>
                <button class="haptic-btn" onclick="hapticMedium()">ä¸­è§¦</button>
                <button class="haptic-btn" onclick="hapticHeavy()">é‡è§¦</button>
                <button class="haptic-btn" onclick="hapticSuccess()">æˆåŠŸ</button>
            </div>
        </div>

        <!-- æ‰‹å†™ç”»æ¿ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ¨</span>
                <span>è§¦æ‘¸ç»˜ç”»</span>
            </div>
            <canvas id="drawCanvas" class="canvas-draw"></canvas>
            <div class="button-group" style="margin-top: 10px;">
                <button class="btn" onclick="clearCanvas()">æ¸…ç©ºç”»æ¿</button>
                <button class="btn btn-secondary" onclick="saveCanvas()">ä¿å­˜å›¾ç‰‡</button>
            </div>
        </div>

        <!-- ç¯å¢ƒå…‰æ„Ÿåº” -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ’¡</span>
                <span>ç¯å¢ƒå…‰ä¼ æ„Ÿå™¨</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="startLightSensor()">å¼€å§‹ç›‘æµ‹</button>
                <button class="btn btn-secondary" onclick="stopLightSensor()">åœæ­¢ç›‘æµ‹</button>
            </div>
            <div class="sensor-grid">
                <div class="sensor-card">
                    <div style="font-size: 12px; color: #666;">å…‰ç…§å¼ºåº¦</div>
                    <div class="sensor-value" id="lightValue">0 lux</div>
                </div>
                <div class="sensor-card">
                    <div style="font-size: 12px; color: #666;">ç¯å¢ƒçŠ¶æ€</div>
                    <div class="sensor-value" id="lightStatus" style="font-size: 16px;">-</div>
                </div>
            </div>
        </div>

        <!-- è·ç¦»ä¼ æ„Ÿå™¨ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“</span>
                <span>è·ç¦»ä¼ æ„Ÿå™¨</span>
            </div>
            <button class="btn" onclick="startProximitySensor()">ç›‘æµ‹æ¥è¿‘</button>
            <div id="proximityResult" class="result-box empty" style="margin-top: 10px;">è·ç¦»ä¿¡æ¯</div>
        </div>

        <!-- äºŒç»´ç æ‰«æ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“·</span>
                <span>äºŒç»´ç æ‰«æ</span>
            </div>
            <button class="btn" onclick="scanQRCode()">ğŸ“¸ æ‰«æäºŒç»´ç </button>
            <div id="qrResult" class="qr-result"></div>
            <input type="file" id="qrInput" accept="image/*" capture="environment" style="display:none" onchange="handleQRImage(event)">
        </div>

        <!-- æ·»åŠ åˆ°ä¸»å±å¹• -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“²</span>
                <span>PWAå®‰è£…</span>
            </div>
            <button class="btn" onclick="promptInstall()">æ·»åŠ åˆ°ä¸»å±å¹•</button>
            <div id="installPrompt" class="install-prompt">
                âœ… å·²æ”¯æŒå®‰è£…ä¸ºPWAåº”ç”¨
            </div>
        </div>

        <!-- å±å¹•æ–¹å‘é”å®š -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ”„</span>
                <span>å±å¹•æ–¹å‘é”å®š</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="lockPortrait()">é”å®šç«–å±</button>
                <button class="btn" onclick="lockLandscape()">é”å®šæ¨ªå±</button>
                <button class="btn btn-secondary" onclick="unlockOrientation()">è§£é™¤é”å®š</button>
            </div>
            <div id="orientationResult" class="result-box empty" style="margin-top: 10px;">æ–¹å‘é”å®šçŠ¶æ€</div>
        </div>

        <!-- æ€§èƒ½ç›‘æµ‹ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ§ </span>
                <span>æ€§èƒ½ç›‘æµ‹</span>
                <span class="feature-badge">å®æ—¶</span>
            </div>
            <button class="btn" onclick="getPerformanceInfo()">è·å–æ€§èƒ½ä¿¡æ¯</button>
            <div id="performanceResult" class="result-box empty">æ€§èƒ½æ•°æ®</div>
        </div>

        <!-- è§†é¢‘å½•åˆ¶ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ¥</span>
                <span>è§†é¢‘å½•åˆ¶</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="startVideoRecording()">å¼€å§‹å½•åˆ¶</button>
                <button class="btn btn-secondary" onclick="stopVideoRecording()">åœæ­¢å½•åˆ¶</button>
            </div>
            <video id="videoPreview" class="video-preview" controls></video>
            <div id="videoInfo" class="result-box empty" style="margin-top: 10px;">è§†é¢‘å½•åˆ¶ä¿¡æ¯</div>
        </div>

        <!-- éŸ³é¢‘å½•åˆ¶ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ™ï¸</span>
                <span>éŸ³é¢‘å½•åˆ¶</span>
            </div>
            <div class="media-controls">
                <button class="media-btn" onclick="startAudioRecording()">âºï¸ å½•éŸ³</button>
                <button class="media-btn" onclick="pauseAudioRecording()">â¸ï¸ æš‚åœ</button>
                <button class="media-btn" onclick="stopAudioRecording()">â¹ï¸ åœæ­¢</button>
                <button class="media-btn" onclick="playAudio()">â–¶ï¸ æ’­æ”¾</button>
            </div>
            <div id="audioInfo" class="result-box empty" style="margin-top: 10px;">å½•éŸ³æ—¶é•¿: 0s</div>
        </div>

        <!-- é”®ç›˜äº‹ä»¶ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">âŒ¨ï¸</span>
                <span>è™šæ‹Ÿé”®ç›˜</span>
            </div>
            <input type="text" id="keyboardInput" placeholder="ç‚¹å‡»è¾“å…¥æŸ¥çœ‹é”®ç›˜ä¿¡æ¯" style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 14px;">
            <div class="keyboard-visual" id="keyboardInfo">é”®ç›˜ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
        </div>

        <!-- é¡µé¢ç»Ÿè®¡ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“Š</span>
                <span>é¡µé¢ç»Ÿè®¡</span>
            </div>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="scrollDistance">0</div>
                    <div class="stat-label">æ»šåŠ¨è·ç¦»(px)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="touchCount">0</div>
                    <div class="stat-label">è§¦æ‘¸æ¬¡æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="timeOnPage">0s</div>
                    <div class="stat-label">åœç•™æ—¶é—´</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="apiCount">30+</div>
                    <div class="stat-label">APIæ€»æ•°</div>
                </div>
            </div>
        </div>

        <!-- è“ç‰™è®¾å¤‡ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“¡</span>
                <span>è“ç‰™è¿æ¥</span>
                <span class="feature-badge">BLE</span>
            </div>
            <button class="btn" onclick="scanBluetooth()">æ‰«æè“ç‰™è®¾å¤‡</button>
            <div id="bluetoothDevices" class="result-box empty" style="margin-top: 10px;">è“ç‰™è®¾å¤‡åˆ—è¡¨</div>
        </div>

        <!-- NFCè¯»å– -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“±</span>
                <span>NFCè¯»å†™</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="readNFC()">è¯»å–NFC</button>
                <button class="btn btn-secondary" onclick="writeNFC()">å†™å…¥NFC</button>
            </div>
            <div id="nfcResult" class="result-box empty" style="margin-top: 10px;">NFCæ“ä½œç»“æœ</div>
        </div>

        <!-- USBè®¾å¤‡ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ”Œ</span>
                <span>USBè®¾å¤‡</span>
            </div>
            <button class="btn" onclick="connectUSB()">è¿æ¥USBè®¾å¤‡</button>
            <div id="usbDevices" class="result-box empty" style="margin-top: 10px;">USBè®¾å¤‡ä¿¡æ¯</div>
        </div>

        <!-- Webæ”¯ä»˜ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ’³</span>
                <span>Webæ”¯ä»˜</span>
            </div>
            <button class="btn" onclick="requestPayment()">ğŸ’° å‘èµ·æ”¯ä»˜</button>
            <div id="paymentResult" class="result-box empty" style="margin-top: 10px;">æ”¯ä»˜çŠ¶æ€</div>
        </div>

        <!-- è”ç³»äººè®¿é—® -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“‡</span>
                <span>é€šè®¯å½•</span>
            </div>
            <button class="btn" onclick="pickContact()">é€‰æ‹©è”ç³»äºº</button>
            <div id="contactResult" class="result-box empty" style="margin-top: 10px;">è”ç³»äººä¿¡æ¯</div>
        </div>

        <!-- è§¦æ‘¸å‹åŠ› -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ‘‡</span>
                <span>å‹åŠ›æ„Ÿåº”</span>
                <span class="feature-badge">3D Touch</span>
            </div>
            <div style="padding: 20px; background: #f5f5f5; border-radius: 8px; text-align: center;" id="pressureArea">
                ç”¨åŠ›æŒ‰å‹å±å¹•
            </div>
            <div class="pressure-bar">
                <div class="pressure-fill" id="pressureFill" style="width: 0%">0%</div>
            </div>
        </div>

        <!-- æ¸¸æˆæ‰‹æŸ„ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ®</span>
                <span>æ¸¸æˆæ‰‹æŸ„</span>
            </div>
            <button class="btn" onclick="connectGamepad()">è¿æ¥æ‰‹æŸ„</button>
            <div class="gamepad-visual" id="gamepadButtons" style="display: none;">
                <div class="gamepad-btn" id="btn0">A</div>
                <div class="gamepad-btn" id="btn1">B</div>
                <div class="gamepad-btn" id="btn2">X</div>
                <div class="gamepad-btn" id="btn3">Y</div>
            </div>
            <div id="gamepadInfo" class="result-box empty" style="margin-top: 10px;">æ‰‹æŸ„ä¿¡æ¯</div>
        </div>

        <!-- åœ°ç†å›´æ  -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ—ºï¸</span>
                <span>åœ°ç†å›´æ </span>
            </div>
            <button class="btn" onclick="setupGeofence()">è®¾ç½®å›´æ ç›‘æ§</button>
            <div class="geofence-map">
                <div class="location-dot" id="locationDot"></div>
                <span style="color: #00796b; font-weight: bold;">ğŸ“ ç›‘æ§åŒºåŸŸ</span>
            </div>
            <div id="geofenceResult" class="result-box empty" style="margin-top: 10px;">å›´æ çŠ¶æ€</div>
        </div>

        <!-- ç¯å¢ƒæ¸©åº¦ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸŒ¡ï¸</span>
                <span>æ¸©åº¦ä¼ æ„Ÿå™¨</span>
            </div>
            <button class="btn" onclick="readTemperature()">è¯»å–æ¸©åº¦</button>
            <div class="ambient-temp" id="tempDisplay">--Â°C</div>
            <div id="tempInfo" class="result-box empty">æ¸©åº¦ä¼ æ„Ÿå™¨ä¿¡æ¯</div>
        </div>

        <!-- æ¡å½¢ç æ‰«æ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“Š</span>
                <span>æ¡å½¢ç æ‰«æ</span>
            </div>
            <button class="btn" onclick="scanBarcode()">æ‰«ææ¡å½¢ç </button>
            <div class="barcode-scanner" id="barcodeScanner" style="display: none;">
                <div class="scan-line"></div>
                <span style="color: white; z-index: 1;">ğŸ“· æ‰«æä¸­...</span>
            </div>
            <div id="barcodeResult" class="result-box empty" style="margin-top: 10px;">æ‰«æç»“æœ</div>
        </div>

        <!-- å±å¹•å½•åˆ¶ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ–¥ï¸</span>
                <span>å±å¹•å½•åˆ¶</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="startScreenRecording()">å¼€å§‹å½•å±</button>
                <button class="btn btn-secondary" onclick="stopScreenRecording()">åœæ­¢å½•å±</button>
            </div>
            <div id="screenRecordInfo" class="result-box empty" style="margin-top: 10px;">å½•å±çŠ¶æ€</div>
        </div>

        <!-- æ–‡ä»¶ç³»ç»Ÿ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ“</span>
                <span>æ–‡ä»¶ç³»ç»Ÿ</span>
            </div>
            <div class="button-group">
                <button class="btn" onclick="openFilePicker()">é€‰æ‹©æ–‡ä»¶</button>
                <button class="btn btn-secondary" onclick="saveToDisk()">ä¿å­˜æ–‡ä»¶</button>
            </div>
            <div id="fileSystemInfo" class="result-box empty" style="margin-top: 10px;">æ–‡ä»¶æ“ä½œä¿¡æ¯</div>
        </div>

        <!-- é—²ç½®æ£€æµ‹ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ’¤</span>
                <span>ç”¨æˆ·é—²ç½®æ£€æµ‹</span>
            </div>
            <button class="btn" onclick="detectIdle()">å¼€å§‹æ£€æµ‹é—²ç½®</button>
            <div id="idleResult" class="result-box empty" style="margin-top: 10px;">é—²ç½®çŠ¶æ€</div>
        </div>

        <!-- åå°åŒæ­¥ -->
        <div class="card">
            <div class="card-title">
                <span class="card-icon">ğŸ”„</span>
                <span>åå°åŒæ­¥</span>
            </div>
            <button class="btn" onclick="registerBackgroundSync()">æ³¨å†Œåå°ä»»åŠ¡</button>
            <div id="syncResult" class="result-box empty" style="margin-top: 10px;">åŒæ­¥çŠ¶æ€</div>
        </div>

        <!-- å¼€å‘è€…ä¿¡æ¯ -->
        <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <div class="card-title" style="color: white;">
                <span class="card-icon">ğŸ’¡</span>
                <span>å¼€å‘è€…æç¤º</span>
            </div>
            <div style="line-height: 1.8; font-size: 14px;">
                âœ¨ æœ¬é¡µé¢é›†æˆäº†45+ç§»åŠ¨ç«¯è®¾å¤‡API<br>
                ğŸ“± æœ€ä½³ä½“éªŒè¯·åœ¨çœŸå®æ‰‹æœºä¸Šæµ‹è¯•<br>
                ğŸ”’ éƒ¨åˆ†APIéœ€è¦HTTPSç¯å¢ƒ<br>
                âš¡ æŸäº›åŠŸèƒ½éœ€è¦ç”¨æˆ·æˆæƒ<br>
                ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§å¯èƒ½æœ‰å·®å¼‚
            </div>
        </div>
    </div>

    <!-- å…¨å±æ¼”ç¤ºåŒºåŸŸ -->
    <div class="fullscreen-demo" id="fullscreenDemo">
        <h2>ğŸ–¥ï¸ å…¨å±æ¨¡å¼å·²æ¿€æ´»</h2>
        <p style="margin-bottom: 20px; font-size: 18px;">äº«å—æ²‰æµ¸å¼ä½“éªŒ</p>
        <button onclick="exitFullscreen()">é€€å‡ºå…¨å±</button>
    </div>

    <!-- é€šçŸ¥æ¼”ç¤º -->
    <div class="notification-demo" id="notificationDemo">
        <h3 style="color: #667eea; margin-bottom: 10px;">ğŸ”” H5é€šçŸ¥</h3>
        <p style="color: #666;">è¿™æ˜¯æ¥è‡ªH5çš„ç³»ç»Ÿé€šçŸ¥ï¼</p>
    </div>

    <script>
        let orientationActive = false;

        // ç›¸æœºç›¸å†Œ - jQueryç‰ˆæœ¬
        function openCamera() {
            $('#cameraInput').click();
        }

        function openAlbum() {
            $('#albumInput').click();
        }

        function handlePhoto(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const $preview = $('#photoPreview');
                    $preview.attr('src', e.target.result).addClass('show');
                };
                reader.readAsDataURL(file);
            }
        }

        // åœ°ç†ä½ç½®
        function getLocation() {
            const $result = $('#locationResult');
            $result.removeClass('empty').html('ğŸ” æ­£åœ¨è·å–ä½ç½®...');

            if (!navigator.geolocation) {
                $result.html('âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†ä½ç½®API');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude, accuracy } = position.coords;
                    $result.html(`
                        âœ… <strong>ä½ç½®è·å–æˆåŠŸ</strong><br>
                        ğŸ“ çº¬åº¦: ${latitude.toFixed(6)}<br>
                        ğŸ“ ç»åº¦: ${longitude.toFixed(6)}<br>
                        ğŸ¯ ç²¾åº¦: ${accuracy.toFixed(2)}ç±³<br>
                        ğŸ• æ—¶é—´: ${new Date(position.timestamp).toLocaleString()}
                    `);
                },
                (error) => {
                    $result.html(`âŒ è·å–ä½ç½®å¤±è´¥: ${error.message}`);
                },
                { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
            );
        }

        // è®¾å¤‡æ–¹å‘ - jQueryç‰ˆæœ¬
        function startOrientation() {
            if (orientationActive) return;
            
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            activateOrientation();
                        }
                    })
                    .catch(console.error);
            } else {
                activateOrientation();
            }
        }

        function activateOrientation() {
            orientationActive = true;
            window.addEventListener('deviceorientation', handleOrientation);
            window.addEventListener('orientationchange', handleScreenOrientation);
            handleScreenOrientation();
        }

        function handleOrientation(event) {
            const alpha = event.alpha || 0;
            const beta = event.beta || 0;
            const gamma = event.gamma || 0;
            
            $('#alpha').text(alpha.toFixed(1) + 'Â°');
            $('#beta').text(beta.toFixed(1) + 'Â°');
            $('#gamma').text(gamma.toFixed(1) + 'Â°');
            
            // 3Då¯è§†åŒ–æ•ˆæœ
            $('#gyroVisual').css('transform', `rotateX(${beta}deg) rotateY(${gamma}deg) rotateZ(${alpha}deg)`);
        }

        function handleScreenOrientation() {
            const orientation = window.screen.orientation || {};
            const type = orientation.type || window.orientation;
            let text = 'ç«–å±';
            
            if (type.toString().includes('landscape') || type === 90 || type === -90) {
                text = 'æ¨ªå±';
            }
            
            $('#screenOrientation').text(text);
        }

        function stopOrientation() {
            orientationActive = false;
            window.removeEventListener('deviceorientation', handleOrientation);
            window.removeEventListener('orientationchange', handleScreenOrientation);
        }

        // éœ‡åŠ¨
        function vibrateShort() {
            if (navigator.vibrate) {
                navigator.vibrate(200);
                showVibrateEffect();
            } else {
                alert('æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒéœ‡åŠ¨API');
            }
        }

        function vibrateLong() {
            if (navigator.vibrate) {
                navigator.vibrate(1000);
                showVibrateEffect();
            }
        }

        function vibratePattern() {
            if (navigator.vibrate) {
                navigator.vibrate([200, 100, 200, 100, 200]);
                showVibrateEffect();
            }
        }

        function showVibrateEffect() {
            const card = document.getElementById('vibrateCard');
            card.classList.add('vibrating');
            setTimeout(() => card.classList.remove('vibrating'), 300);
        }

        // ç”µæ± çŠ¶æ€ - jQueryç‰ˆæœ¬
        async function getBattery() {
            if (!navigator.getBattery) {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒç”µæ± API');
                return;
            }

            try {
                const battery = await navigator.getBattery();
                updateBatteryDisplay(battery);

                battery.addEventListener('levelchange', () => updateBatteryDisplay(battery));
                battery.addEventListener('chargingchange', () => updateBatteryDisplay(battery));
            } catch (error) {
                alert('è·å–ç”µæ± ä¿¡æ¯å¤±è´¥');
            }
        }

        function updateBatteryDisplay(battery) {
            const $visual = $('#batteryVisual');
            const $fill = $('#batteryFill');
            const $info = $('#batteryInfo');

            $visual.css('display', 'block');

            const level = (battery.level * 100).toFixed(0);
            $fill.css('width', level + '%');
            $fill.text(level + '%');
            $fill.attr('class', 'battery-fill' + (battery.level < 0.2 ? ' low' : ''));

            const chargingTime = battery.chargingTime === Infinity ? 'æœªå……ç”µ' : `${(battery.chargingTime / 60).toFixed(0)}åˆ†é’Ÿ`;
            const dischargingTime = battery.dischargingTime === Infinity ? 'N/A' : `${(battery.dischargingTime / 60).toFixed(0)}åˆ†é’Ÿ`;

            $info.html(`
                ğŸ”‹ ç”µé‡: ${level}%<br>
                ${battery.charging ? 'âš¡' : 'ğŸ”Œ'} çŠ¶æ€: ${battery.charging ? 'å……ç”µä¸­' : 'æœªå……ç”µ'}<br>
                ${battery.charging ? `â±ï¸ å……æ»¡æ—¶é—´: ${chargingTime}` : `â±ï¸ å‰©ä½™æ—¶é—´: ${dischargingTime}`}
            `);
        }

        // è®¾å¤‡ä¿¡æ¯ - jQueryç‰ˆæœ¬
        function getDeviceInfo() {
            const $info = $('#deviceInfo');
            $info.attr('class', 'result-box');
            
            const ua = navigator.userAgent;
            const platform = navigator.platform;
            const language = navigator.language;
            const online = navigator.onLine;
            const cores = navigator.hardwareConcurrency || 'N/A';
            const memory = navigator.deviceMemory || 'N/A';
            const screen = `${window.screen.width} Ã— ${window.screen.height}`;
            const viewport = `${window.innerWidth} Ã— ${window.innerHeight}`;

            $info.html(`
                ğŸ“± <strong>å¹³å°:</strong> ${platform}<br>
                ğŸŒ <strong>è¯­è¨€:</strong> ${language}<br>
                ğŸ’» <strong>CPUæ ¸å¿ƒ:</strong> ${cores}<br>
                ğŸ§  <strong>å†…å­˜:</strong> ${memory}GB<br>
                ğŸ“º <strong>å±å¹•:</strong> ${screen}<br>
                ğŸ–¼ï¸ <strong>è§†å£:</strong> ${viewport}<br>
                ${online ? 'âœ…' : 'âŒ'} <strong>ç½‘ç»œ:</strong> ${online ? 'åœ¨çº¿' : 'ç¦»çº¿'}<br>
                <details style="margin-top:10px;">
                    <summary style="cursor:pointer;color:#667eea;">æŸ¥çœ‹å®Œæ•´UA</summary>
                    <div style="margin-top:5px;font-size:12px;word-break:break-all;">${ua}</div>
                </details>
            `);
        }

        // ç½‘ç»œçŠ¶æ€ - jQueryç‰ˆæœ¬
        function getNetworkInfo() {
            const $info = $('#networkInfo');
            $info.attr('class', 'result-box');

            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            
            if (!connection) {
                $info.html('âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒç½‘ç»œä¿¡æ¯API');
                return;
            }

            const type = connection.effectiveType || 'unknown';
            const downlink = connection.downlink || 'N/A';
            const rtt = connection.rtt || 'N/A';
            const saveData = connection.saveData ? 'æ˜¯' : 'å¦';

            $info.html(`
                ğŸ“¶ <strong>ç½‘ç»œç±»å‹:</strong> ${type.toUpperCase()}<br>
                â¬‡ï¸ <strong>ä¸‹è¡Œé€Ÿåº¦:</strong> ${downlink} Mbps<br>
                â±ï¸ <strong>å¾€è¿”å»¶è¿Ÿ:</strong> ${rtt} ms<br>
                ğŸ’¾ <strong>çœæµé‡æ¨¡å¼:</strong> ${saveData}<br>
                ${navigator.onLine ? 'âœ… åœ¨çº¿' : 'âŒ ç¦»çº¿'}
            `);
            
            // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
            $('#pingTime').text(rtt);
            $('#downSpeed').text(downlink + ' Mbps');
        }
        
        // ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
        window.addEventListener('online', updateConnectionStatus);
        window.addEventListener('offline', updateConnectionStatus);
        
        function updateConnectionStatus() {
            const $status = $('#connectionStatus');
            if (navigator.onLine) {
                $status.removeClass('offline');
            } else {
                $status.addClass('offline');
            }
        }
        updateConnectionStatus();

        // å‰ªè´´æ¿ - jQueryç‰ˆæœ¬
        async function copyToClipboard() {
            const text = 'è¿™æ˜¯é€šè¿‡H5 Clipboard APIå¤åˆ¶çš„æ–‡æœ¬ ğŸ“‹';
            
            try {
                await navigator.clipboard.writeText(text);
                const $result = $('#clipboardResult');
                $result.attr('class', 'result-box');
                $result.html(`âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿:<br>"${text}"`);
            } catch (err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥æƒé™');
            }
        }

        async function readClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                const $result = $('#clipboardResult');
                $result.attr('class', 'result-box');
                $result.html(`âœ… å‰ªè´´æ¿å†…å®¹:<br>"${text || '(ç©º)'}"`);
            } catch (err) {
                alert('è¯»å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥æƒé™');
            }
        }

        // ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
        window.addEventListener('online', () => console.log('ç½‘ç»œå·²è¿æ¥'));
        window.addEventListener('offline', () => console.log('ç½‘ç»œå·²æ–­å¼€'));

        // é‡åŠ›æ„Ÿåº”/åŠ é€Ÿåº¦ - jQueryç‰ˆæœ¬
        let motionActive = false;

        function startMotion() {
            if (motionActive) return;

            if (typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            activateMotion();
                        }
                    })
                    .catch(console.error);
            } else {
                activateMotion();
            }
        }

        function activateMotion() {
            motionActive = true;
            window.addEventListener('devicemotion', handleMotion);
        }

        function handleMotion(event) {
            const acc = event.accelerationIncludingGravity;
            if (acc) {
                $('#motionX').text((acc.x || 0).toFixed(2));
                $('#motionY').text((acc.y || 0).toFixed(2));
                $('#motionZ').text((acc.z || 0).toFixed(2));
            }
        }

        function stopMotion() {
            motionActive = false;
            window.removeEventListener('devicemotion', handleMotion);
        }

        // è¯­éŸ³è¯†åˆ« - jQueryç‰ˆæœ¬
        let recognition = null;
        let isRecording = false;

        function toggleSpeech() {
            const $btn = $('#speechBtn');
            
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«API');
                return;
            }

            if (isRecording) {
                recognition.stop();
                $btn.text('å¼€å§‹å½•éŸ³');
                $btn.removeClass('recording');
                isRecording = false;
                $('#voiceWave').addClass('hidden');
            } else {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.lang = 'zh-CN';
                recognition.continuous = true;
                recognition.interimResults = true;

                recognition.onstart = () => {
                    $btn.text('ğŸ¤ å½•éŸ³ä¸­...');
                    $btn.addClass('recording');
                    isRecording = true;
                    $('#speechResult').html('ğŸ‘‚ æ­£åœ¨è†å¬...');
                    $('#voiceWave').removeClass('hidden');
                };

                recognition.onresult = (event) => {
                    let transcript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                    }
                    $('#speechResult').html(`âœ… è¯†åˆ«ç»“æœ: ${transcript}`);
                };

                recognition.onerror = (event) => {
                    $('#speechResult').html(`âŒ é”™è¯¯: ${event.error}`);
                    $btn.text('å¼€å§‹å½•éŸ³');
                    $btn.removeClass('recording');
                    isRecording = false;
                    $('#voiceWave').addClass('hidden');
                };

                recognition.start();
            }
        }

        // è¯­éŸ³æ’­æŠ¥ - jQueryç‰ˆæœ¬
        function speakText() {
            if (!('speechSynthesis' in window)) {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ');
                return;
            }

            const text = 'è¿™æ˜¯é€šè¿‡H5è¯­éŸ³åˆæˆAPIæ’­æŠ¥çš„æ–‡æœ¬ï¼Œæ¬¢è¿ä½¿ç”¨è®¾å¤‡èƒ½åŠ›æ¼”ç¤ºé¡µé¢';
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN';
            utterance.rate = 1.0;
            utterance.pitch = 1.0;

            utterance.onstart = () => {
                $('#speechResult').html('ğŸ”Š æ­£åœ¨æ’­æŠ¥...');
            };

            utterance.onend = () => {
                $('#speechResult').html('âœ… æ’­æŠ¥å®Œæˆ');
            };

            speechSynthesis.speak(utterance);
        }

        // å…¨å±æ¨¡å¼ - jQueryç‰ˆæœ¬
        function toggleFullscreen() {
            const elem = document.documentElement;
            
            if (!document.fullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                } else if (elem.mozRequestFullScreen) {
                    elem.mozRequestFullScreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
                $('#fullscreenDemo').addClass('active');
            } else {
                exitFullscreen();
            }
        }

        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
            $('#fullscreenDemo').removeClass('active');
        }

        // å±å¹•å”¤é†’é” - jQueryç‰ˆæœ¬
        let wakeLock = null;

        async function requestWakeLock() {
            if (!('wakeLock' in navigator)) {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒå±å¹•å”¤é†’é”API');
                return;
            }

            try {
                wakeLock = await navigator.wakeLock.request('screen');
                $('#wakeLockStatus').text('âœ… å±å¹•å¸¸äº®å·²æ¿€æ´»');
                $('#wakeLockStatus').addClass('active');

                wakeLock.addEventListener('release', () => {
                    $('#wakeLockStatus').text('âŒ æœªæ¿€æ´»');
                    $('#wakeLockStatus').removeClass('active');
                });
            } catch (err) {
                alert('æ— æ³•æ¿€æ´»å±å¹•å¸¸äº®: ' + err.message);
            }
        }

        async function releaseWakeLock() {
            if (wakeLock) {
                await wakeLock.release();
                wakeLock = null;
            }
        }

        // åˆ†äº«åŠŸèƒ½
        async function shareText() {
            if (!navigator.share) {
                document.getElementById('shareResult').innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåˆ†äº«API';
                return;
            }

            try {
                await navigator.share({
                    title: 'H5è®¾å¤‡èƒ½åŠ›æ¼”ç¤º',
                    text: 'è¿™æ˜¯ä¸€ä¸ªå±•ç¤ºH5è®¾å¤‡APIèƒ½åŠ›çš„é¡µé¢',
                });
                document.getElementById('shareResult').innerHTML = 'âœ… åˆ†äº«æˆåŠŸ';
            } catch (err) {
                document.getElementById('shareResult').innerHTML = 'âŒ åˆ†äº«å–æ¶ˆæˆ–å¤±è´¥';
            }
        }

        async function shareUrl() {
            if (!navigator.share) {
                document.getElementById('shareResult').innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåˆ†äº«API';
                return;
            }

            try {
                await navigator.share({
                    title: 'H5è®¾å¤‡èƒ½åŠ›æ¼”ç¤º',
                    text: 'å¿«æ¥ä½“éªŒH5çš„å¼ºå¤§è®¾å¤‡èƒ½åŠ›ï¼',
                    url: window.location.href,
                });
                document.getElementById('shareResult').innerHTML = 'âœ… åˆ†äº«æˆåŠŸ';
            } catch (err) {
                document.getElementById('shareResult').innerHTML = 'âŒ åˆ†äº«å–æ¶ˆæˆ–å¤±è´¥';
            }
        }

        // ç³»ç»Ÿé€šçŸ¥
        function requestNotification() {
            if (!('Notification' in window)) {
                document.getElementById('notificationResult').innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥API';
                return;
            }

            Notification.requestPermission().then(permission => {
                const result = document.getElementById('notificationResult');
                if (permission === 'granted') {
                    result.innerHTML = 'âœ… é€šçŸ¥æƒé™å·²æˆäºˆ';
                } else if (permission === 'denied') {
                    result.innerHTML = 'âŒ é€šçŸ¥æƒé™è¢«æ‹’ç»';
                } else {
                    result.innerHTML = 'âš ï¸ é€šçŸ¥æƒé™å¾…å®š';
                }
            });
        }

        function sendNotification() {
            if (!('Notification' in window)) {
                alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒé€šçŸ¥');
                return;
            }

            if (Notification.permission === 'granted') {
                const notification = new Notification('H5è®¾å¤‡èƒ½åŠ›', {
                    body: 'è¿™æ˜¯æ¥è‡ªH5çš„ç³»ç»Ÿé€šçŸ¥ï¼',
                    icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">ğŸ“±</text></svg>',
                    badge: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">ğŸ””</text></svg>',
                });

                notification.onclick = () => {
                    window.focus();
                    notification.close();
                };

                // é¡µé¢å†…é€šçŸ¥æ¼”ç¤º
                const demo = document.getElementById('notificationDemo');
                demo.classList.add('show');
                setTimeout(() => demo.classList.remove('show'), 3000);
            } else {
                alert('è¯·å…ˆæˆäºˆé€šçŸ¥æƒé™');
            }
        }

        // å±å¹•äº®åº¦ï¼ˆéƒ¨åˆ†æµè§ˆå™¨æ”¯æŒï¼‰
        async function adjustBrightness() {
            const result = document.getElementById('brightnessResult');
            
            if ('screen' in window && 'brightness' in window.screen) {
                try {
                    const brightness = await window.screen.brightness;
                    result.innerHTML = `å½“å‰äº®åº¦: ${(brightness * 100).toFixed(0)}%`;
                } catch (err) {
                    result.innerHTML = 'âŒ æ— æ³•è·å–äº®åº¦ä¿¡æ¯';
                }
            } else {
                result.innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒäº®åº¦APIï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰';
            }
        }

        // é¡µé¢å¯è§æ€§ç›‘å¬
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                console.log('é¡µé¢å·²éšè—');
            } else {
                console.log('é¡µé¢å·²æ˜¾ç¤º');
            }
        });

        // æ»šåŠ¨å¤„ç† - æ»šåŠ¨è”åŠ¨æ•ˆæœ
        function handleScroll() {
            const $header = $('#pageHeader');
            const scrollTop = $(window).scrollTop();
            
            // æ ‡é¢˜æ æ»šåŠ¨è”åŠ¨
            if (scrollTop > 50) {
                $header.addClass('scrolled');
            } else {
                $header.removeClass('scrolled');
            }

            // æ»šåŠ¨è¿›åº¦
            const winHeight = $(document).height() - $(window).height();
            const scrolled = (scrollTop / winHeight) * 100;
            $('#scrollProgress').css('height', scrolled + '%');
            
            // æ›´æ–°ç»Ÿè®¡
            $('#scrollDistance').text(scrollTop.toFixed(0));
        }

        // é¡µé¢ç»Ÿè®¡
        function startStats() {
            setInterval(function() {
                const timeOnPage = ((Date.now() - DeviceAPI.state.pageStartTime) / 1000).toFixed(0);
                $('#timeOnPage').text(timeOnPage + 's');
            }, 1000);
        }

        // å¤šç‚¹è§¦æ‘¸äº‹ä»¶
        const touchVisual = document.getElementById('touchVisual');
        const touchInfo = document.getElementById('touchInfo');

        touchVisual.addEventListener('touchstart', handleTouch);
        touchVisual.addEventListener('touchmove', handleTouch);
        touchVisual.addEventListener('touchend', handleTouchEnd);

        function handleTouch(e) {
            e.preventDefault();
            const touches = e.touches;
            touchInfo.className = 'result-box';
            touchInfo.innerHTML = `
                ğŸ‘† <strong>è§¦æ‘¸ç‚¹æ•°:</strong> ${touches.length}<br>
                ${Array.from(touches).map((touch, i) => 
                    `<strong>ç‚¹${i+1}:</strong> X:${touch.clientX.toFixed(0)}, Y:${touch.clientY.toFixed(0)}`
                ).join('<br>')}
            `;

            // å¯è§†åŒ–è§¦æ‘¸ç‚¹
            Array.from(touches).forEach(touch => {
                const point = document.createElement('div');
                point.className = 'touch-point';
                const rect = touchVisual.getBoundingClientRect();
                point.style.left = (touch.clientX - rect.left - 20) + 'px';
                point.style.top = (touch.clientY - rect.top - 20) + 'px';
                touchVisual.appendChild(point);
                setTimeout(() => point.remove(), 600);
            });
        }

        function handleTouchEnd(e) {
            if (e.touches.length === 0) {
                setTimeout(() => {
                    touchInfo.className = 'result-box empty';
                    touchInfo.innerHTML = 'è§¦æ‘¸ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ';
                }, 1000);
            }
        }

        // æ‰‹åŠ¿è¯†åˆ«
        const gestureArea = document.getElementById('gestureArea');
        const gestureResult = document.getElementById('gestureResult');
        let gestureStartX = 0, gestureStartY = 0;
        let gestureEndX = 0, gestureEndY = 0;

        gestureArea.addEventListener('touchstart', (e) => {
            gestureStartX = e.touches[0].clientX;
            gestureStartY = e.touches[0].clientY;
        });

        gestureArea.addEventListener('touchend', (e) => {
            gestureEndX = e.changedTouches[0].clientX;
            gestureEndY = e.changedTouches[0].clientY;
            detectGesture();
        });

        function detectGesture() {
            const deltaX = gestureEndX - gestureStartX;
            const deltaY = gestureEndY - gestureStartY;
            const threshold = 50;

            let gesture = '';
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                if (deltaX > threshold) gesture = 'ğŸ‘‰ å‘å³æ»‘åŠ¨';
                else if (deltaX < -threshold) gesture = 'ğŸ‘ˆ å‘å·¦æ»‘åŠ¨';
            } else {
                if (deltaY > threshold) gesture = 'ğŸ‘‡ å‘ä¸‹æ»‘åŠ¨';
                else if (deltaY < -threshold) gesture = 'ğŸ‘† å‘ä¸Šæ»‘åŠ¨';
            }

            if (gesture) {
                gestureResult.className = 'result-box';
                gestureResult.innerHTML = `âœ… æ£€æµ‹åˆ°æ‰‹åŠ¿: <strong>${gesture}</strong>`;
                gestureArea.textContent = gesture;
                setTimeout(() => {
                    gestureArea.textContent = 'ğŸ‘† æ»‘åŠ¨è¯•è¯•';
                }, 1000);
            }
        }

        // è§¦è§‰åé¦ˆï¼ˆHaptic Feedbackï¼‰
        function hapticLight() {
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }
        }

        function hapticMedium() {
            if (navigator.vibrate) {
                navigator.vibrate(20);
            }
        }

        function hapticHeavy() {
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        function hapticSuccess() {
            if (navigator.vibrate) {
                navigator.vibrate([10, 50, 10]);
            }
        }

        // è§¦æ‘¸ç»˜ç”»
        const canvas = document.getElementById('drawCanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;

        // è®¾ç½®canvaså°ºå¯¸
        function resizeCanvas() {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            ctx.beginPath();
            ctx.moveTo(touch.clientX - rect.left, touch.clientY - rect.top);
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            ctx.lineTo(touch.clientX - rect.left, touch.clientY - rect.top);
            ctx.stroke();
        });

        canvas.addEventListener('touchend', () => {
            isDrawing = false;
        });

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function saveCanvas() {
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `drawing_${Date.now()}.png`;
                a.click();
                URL.revokeObjectURL(url);
            });
        }

        // ç¯å¢ƒå…‰ä¼ æ„Ÿå™¨
        let lightSensor = null;

        async function startLightSensor() {
            if (!('AmbientLightSensor' in window)) {
                alert('æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒç¯å¢ƒå…‰ä¼ æ„Ÿå™¨API');
                return;
            }

            try {
                lightSensor = new AmbientLightSensor();
                lightSensor.addEventListener('reading', () => {
                    const lux = lightSensor.illuminance;
                    document.getElementById('lightValue').textContent = lux.toFixed(0) + ' lux';
                    
                    let status = '';
                    if (lux < 50) status = 'ğŸ˜´ é»‘æš—';
                    else if (lux < 200) status = 'ğŸŒ™ æ˜æš—';
                    else if (lux < 1000) status = 'ğŸ’¡ æ­£å¸¸';
                    else status = 'â˜€ï¸ æ˜äº®';
                    
                    document.getElementById('lightStatus').textContent = status;
                });
                lightSensor.start();
            } catch (error) {
                alert('æ— æ³•å¯åŠ¨ç¯å¢ƒå…‰ä¼ æ„Ÿå™¨: ' + error.message);
            }
        }

        function stopLightSensor() {
            if (lightSensor) {
                lightSensor.stop();
            }
        }

        // è·ç¦»ä¼ æ„Ÿå™¨
        function startProximitySensor() {
            const result = document.getElementById('proximityResult');
            
            if (!('ProximitySensor' in window)) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒè·ç¦»ä¼ æ„Ÿå™¨APIï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰';
                return;
            }

            try {
                const sensor = new ProximitySensor();
                sensor.addEventListener('reading', () => {
                    result.className = 'result-box';
                    result.innerHTML = `
                        ğŸ“ <strong>è·ç¦»:</strong> ${sensor.distance} cm<br>
                        ${sensor.near ? 'ğŸ‘‹ ç‰©ä½“æ¥è¿‘' : 'ğŸ‘Œ ç‰©ä½“è¿œç¦»'}
                    `;
                });
                sensor.start();
            } catch (error) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ— æ³•å¯åŠ¨è·ç¦»ä¼ æ„Ÿå™¨: ' + error.message;
            }
        }

        // äºŒç»´ç æ‰«æï¼ˆä½¿ç”¨ç›¸æœºæ‹ç…§åè¯†åˆ«ï¼‰
        function scanQRCode() {
            document.getElementById('qrInput').click();
        }

        function handleQRImage(event) {
            const file = event.target.files[0];
            if (!file) return;

            const result = document.getElementById('qrResult');
            result.className = 'qr-result show';
            result.innerHTML = 'ğŸ” æ­£åœ¨è¯†åˆ«äºŒç»´ç ...';

            // è¿™é‡Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚jsQRæ¥è§£æäºŒç»´ç 
            // ç®€åŒ–æ¼”ç¤ºï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
            setTimeout(() => {
                result.innerHTML = 'ğŸ’¡ æç¤º: å®é™…åº”ç”¨ä¸­éœ€è¦é›†æˆjsQRåº“æ¥è§£æäºŒç»´ç å›¾ç‰‡';
            }, 1000);
        }

        // PWAå®‰è£…æç¤º
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.add('show');
        });

        function promptInstall() {
            if (!deferredPrompt) {
                alert('å½“å‰æµè§ˆå™¨ä¸æ”¯æŒPWAå®‰è£…ï¼Œæˆ–å·²å®‰è£…');
                return;
            }

            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                if (choiceResult.outcome === 'accepted') {
                    console.log('ç”¨æˆ·æ¥å—äº†å®‰è£…');
                }
                deferredPrompt = null;
            });
        }

        // å±å¹•æ–¹å‘é”å®š
        async function lockPortrait() {
            try {
                await screen.orientation.lock('portrait');
                document.getElementById('orientationResult').innerHTML = 'âœ… å·²é”å®šä¸ºç«–å±æ¨¡å¼';
            } catch (error) {
                alert('æ— æ³•é”å®šå±å¹•æ–¹å‘: ' + error.message);
            }
        }

        async function lockLandscape() {
            try {
                await screen.orientation.lock('landscape');
                document.getElementById('orientationResult').innerHTML = 'âœ… å·²é”å®šä¸ºæ¨ªå±æ¨¡å¼';
            } catch (error) {
                alert('æ— æ³•é”å®šå±å¹•æ–¹å‘: ' + error.message);
            }
        }

        function unlockOrientation() {
            try {
                screen.orientation.unlock();
                document.getElementById('orientationResult').innerHTML = 'âœ… å·²è§£é™¤æ–¹å‘é”å®š';
            } catch (error) {
                alert('æ— æ³•è§£é”å±å¹•æ–¹å‘');
            }
        }

        // æ€§èƒ½ç›‘æµ‹
        function getPerformanceInfo() {
            const $result = $('#performanceResult');
            $result.removeClass('empty');
            
            const memory = performance.memory || {};
            const navigation = performance.navigation;
            const timing = performance.timing;
            
            const loadTime = timing.loadEventEnd - timing.navigationStart;
            const domReady = timing.domContentLoadedEventEnd - timing.navigationStart;
            
            $result.html(`
                ğŸ§  <strong>JSå†…å­˜:</strong> ${(memory.usedJSHeapSize / 1048576).toFixed(2)} MB / ${(memory.totalJSHeapSize / 1048576).toFixed(2)} MB<br>
                âš¡ <strong>é¡µé¢åŠ è½½:</strong> ${loadTime}ms<br>
                ğŸ“„ <strong>DOMå°±ç»ª:</strong> ${domReady}ms<br>
                ğŸ”„ <strong>å¯¼èˆªç±»å‹:</strong> ${navigation.type === 0 ? 'æ­£å¸¸åŠ è½½' : navigation.type === 1 ? 'åˆ·æ–°' : 'å†å²è®°å½•'}<br>
                ğŸ’» <strong>CPUæ ¸å¿ƒ:</strong> ${navigator.hardwareConcurrency || 'N/A'}<br>
                ğŸ¨ <strong>æ¸²æŸ“å¸§ç‡:</strong> ~60 FPS
            `);
        }
        
        // è§†é¢‘å½•åˆ¶
        async function startVideoRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                DeviceAPI.state.mediaRecorder = new MediaRecorder(stream);
                DeviceAPI.state.recordedChunks = [];
                
                DeviceAPI.state.mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        DeviceAPI.state.recordedChunks.push(event.data);
                    }
                };
                
                DeviceAPI.state.mediaRecorder.onstop = () => {
                    const blob = new Blob(DeviceAPI.state.recordedChunks, { type: 'video/webm' });
                    const $videoPreview = $('#videoPreview');
                    $videoPreview.attr('src', URL.createObjectURL(blob)).addClass('show');
                    
                    const $info = $('#videoInfo');
                    $info.removeClass('empty').html(`âœ… å½•åˆ¶å®Œæˆ<br>ğŸ“¦ å¤§å°: ${(blob.size / 1024 / 1024).toFixed(2)} MB`);
                    
                    stream.getTracks().forEach(track => track.stop());
                };
                
                DeviceAPI.state.mediaRecorder.start();
                $('#videoInfo').html('ğŸ”´ æ­£åœ¨å½•åˆ¶è§†é¢‘...');
            } catch (error) {
                alert('æ— æ³•è®¿é—®æ‘„åƒå¤´: ' + error.message);
            }
        }
        
        function stopVideoRecording() {
            if (DeviceAPI.state.mediaRecorder && DeviceAPI.state.mediaRecorder.state !== 'inactive') {
                DeviceAPI.state.mediaRecorder.stop();
            }
        }
        
        // éŸ³é¢‘å½•åˆ¶
        async function startAudioRecording() {
            try {
                DeviceAPI.state.audioStream = await navigator.mediaDevices.getUserMedia({ audio: true });
                DeviceAPI.state.audioRecorder = new MediaRecorder(DeviceAPI.state.audioStream);
                DeviceAPI.state.audioChunks = [];
                DeviceAPI.state.recordingStartTime = Date.now();
                
                DeviceAPI.state.audioRecorder.ondataavailable = (event) => {
                    DeviceAPI.state.audioChunks.push(event.data);
                };
                
                DeviceAPI.state.audioRecorder.onstop = () => {
                    const blob = new Blob(DeviceAPI.state.audioChunks, { type: 'audio/webm' });
                    window.audioBlob = blob;
                    
                    const duration = ((Date.now() - DeviceAPI.state.recordingStartTime) / 1000).toFixed(1);
                    const $info = $('#audioInfo');
                    $info.removeClass('empty').html(`âœ… å½•éŸ³å®Œæˆ<br>â±ï¸ æ—¶é•¿: ${duration}s<br>ğŸ“¦ å¤§å°: ${(blob.size / 1024).toFixed(2)} KB`);
                    
                    clearInterval(DeviceAPI.state.recordingTimer);
                };
                
                DeviceAPI.state.audioRecorder.start();
                $('#audioInfo').html('ğŸ”´ æ­£åœ¨å½•éŸ³: 0s');
                
                DeviceAPI.state.recordingTimer = setInterval(() => {
                    const duration = ((Date.now() - DeviceAPI.state.recordingStartTime) / 1000).toFixed(0);
                    $('#audioInfo').html(`ğŸ”´ æ­£åœ¨å½•éŸ³: ${duration}s`);
                }, 1000);
            } catch (error) {
                alert('æ— æ³•è®¿é—®éº¦å…‹é£: ' + error.message);
            }
        }
        
        function pauseAudioRecording() {
            if (DeviceAPI.state.audioRecorder && DeviceAPI.state.audioRecorder.state === 'recording') {
                DeviceAPI.state.audioRecorder.pause();
                clearInterval(DeviceAPI.state.recordingTimer);
                $('#audioInfo').html('â¸ï¸ å½•éŸ³å·²æš‚åœ');
            } else if (DeviceAPI.state.audioRecorder && DeviceAPI.state.audioRecorder.state === 'paused') {
                DeviceAPI.state.audioRecorder.resume();
                DeviceAPI.state.recordingTimer = setInterval(() => {
                    const duration = ((Date.now() - DeviceAPI.state.recordingStartTime) / 1000).toFixed(0);
                    $('#audioInfo').html(`ğŸ”´ æ­£åœ¨å½•éŸ³: ${duration}s`);
                }, 1000);
            }
        }
        
        function stopAudioRecording() {
            if (DeviceAPI.state.audioRecorder && DeviceAPI.state.audioRecorder.state !== 'inactive') {
                DeviceAPI.state.audioRecorder.stop();
                if (DeviceAPI.state.audioStream) {
                    DeviceAPI.state.audioStream.getTracks().forEach(track => track.stop());
                }
            }
        }
        
        function playAudio() {
            if (window.audioBlob) {
                const audio = new Audio(URL.createObjectURL(window.audioBlob));
                audio.play();
            } else {
                alert('è¯·å…ˆå½•åˆ¶éŸ³é¢‘');
            }
        }
        
        // é”®ç›˜ç›‘å¬
        const keyboardInput = document.getElementById('keyboardInput');
        const keyboardInfo = document.getElementById('keyboardInfo');
        
        keyboardInput.addEventListener('focus', () => {
            keyboardInfo.textContent = 'âŒ¨ï¸ è™šæ‹Ÿé”®ç›˜å·²æ‰“å¼€';
        });
        
        keyboardInput.addEventListener('blur', () => {
            keyboardInfo.textContent = 'é”®ç›˜å·²å…³é—­';
        });
        
        keyboardInput.addEventListener('input', (e) => {
            keyboardInfo.innerHTML = `
                ğŸ“ è¾“å…¥å†…å®¹: "${e.target.value}"<br>
                ğŸ“ é•¿åº¦: ${e.target.value.length} å­—ç¬¦
            `;
        });
        
        // é¡µé¢ç»Ÿè®¡
        let totalTouches = 0;
        let pageStartTime = Date.now();
        
        document.addEventListener('touchstart', () => {
            totalTouches++;
            document.getElementById('touchCount').textContent = totalTouches;
        });
        
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            document.getElementById('scrollDistance').textContent = scrollTop.toFixed(0);
        });
        
        setInterval(() => {
            const timeOnPage = ((Date.now() - pageStartTime) / 1000).toFixed(0);
            document.getElementById('timeOnPage').textContent = timeOnPage + 's';
        }, 1000);
        
        // è“ç‰™è®¾å¤‡
        async function scanBluetooth() {
            const result = document.getElementById('bluetoothDevices');
            
            if (!navigator.bluetooth) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWeb Bluetooth API';
                return;
            }
            
            try {
                const device = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: ['battery_service']
                });
                
                result.className = 'result-box';
                result.innerHTML = `
                    <div class="bluetooth-device">
                        <div>
                            <strong>ğŸ“± ${device.name || 'æœªå‘½åè®¾å¤‡'}</strong><br>
                            <small>ID: ${device.id}</small>
                        </div>
                        <span style="color: #4caf50;">âœ“ å·²è¿æ¥</span>
                    </div>
                `;
            } catch (error) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ è“ç‰™æ‰«æå–æ¶ˆæˆ–å¤±è´¥';
            }
        }
        
        // NFCè¯»å†™
        async function readNFC() {
            const result = document.getElementById('nfcResult');
            
            if (!('NDEFReader' in window)) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒWeb NFC API';
                return;
            }
            
            try {
                const ndef = new NDEFReader();
                await ndef.scan();
                
                result.className = 'result-box';
                result.innerHTML = 'ğŸ“± æ­£åœ¨ç­‰å¾…NFCæ ‡ç­¾...';
                
                ndef.addEventListener('reading', ({ message, serialNumber }) => {
                    result.innerHTML = `
                        <div class="nfc-tag">
                            âœ… NFCæ ‡ç­¾å·²è¯»å–<br>
                            åºåˆ—å·: ${serialNumber}
                        </div>
                    `;
                });
            } catch (error) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ NFCè¯»å–å¤±è´¥: ' + error.message;
            }
        }
        
        async function writeNFC() {
            if (!('NDEFReader' in window)) {
                alert('æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒWeb NFC');
                return;
            }
            
            try {
                const ndef = new NDEFReader();
                await ndef.write('Hello from Web NFC!');
                document.getElementById('nfcResult').innerHTML = 'âœ… NFCå†™å…¥æˆåŠŸ';
            } catch (error) {
                alert('NFCå†™å…¥å¤±è´¥');
            }
        }
        
        // USBè®¾å¤‡
        async function connectUSB() {
            const result = document.getElementById('usbDevices');
            
            if (!navigator.usb) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWebUSB API';
                return;
            }
            
            try {
                const device = await navigator.usb.requestDevice({ filters: [] });
                await device.open();
                
                result.className = 'result-box';
                result.innerHTML = `
                    <div class="usb-device">
                        <strong>ğŸ”Œ ${device.productName || 'USBè®¾å¤‡'}</strong><br>
                        åˆ¶é€ å•†: ${device.manufacturerName || 'Unknown'}<br>
                        åºåˆ—å·: ${device.serialNumber || 'N/A'}
                    </div>
                `;
            } catch (error) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ USBè¿æ¥å–æ¶ˆæˆ–å¤±è´¥';
            }
        }
        
        // Webæ”¯ä»˜
        async function requestPayment() {
            const result = document.getElementById('paymentResult');
            
            if (!window.PaymentRequest) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒPayment Request API';
                return;
            }
            
            const methodData = [{
                supportedMethods: 'basic-card',
                data: {
                    supportedNetworks: ['visa', 'mastercard']
                }
            }];
            
            const details = {
                total: {
                    label: 'æµ‹è¯•å•†å“',
                    amount: { currency: 'CNY', value: '0.01' }
                }
            };
            
            try {
                const request = new PaymentRequest(methodData, details);
                const response = await request.show();
                await response.complete('success');
                
                result.className = 'result-box';
                result.innerHTML = `
                    <div class="payment-status">
                        âœ… æ”¯ä»˜æˆåŠŸ<br>
                        é‡‘é¢: Â¥0.01
                    </div>
                `;
            } catch (error) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ”¯ä»˜å–æ¶ˆæˆ–å¤±è´¥';
            }
        }
        
        // è”ç³»äººé€‰æ‹©
        async function pickContact() {
            const result = document.getElementById('contactResult');
            
            if (!('contacts' in navigator)) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒContact Picker API';
                return;
            }
            
            try {
                const props = ['name', 'tel'];
                const contacts = await navigator.contacts.select(props, { multiple: false });
                
                if (contacts.length > 0) {
                    const contact = contacts[0];
                    result.className = 'result-box';
                    result.innerHTML = `
                        <div class="contact-item">
                            ğŸ“‡ <strong>${contact.name?.[0] || 'æœªçŸ¥'}</strong><br>
                            ğŸ“ ${contact.tel?.[0] || 'æ— ç”µè¯'}
                        </div>
                    `;
                }
            } catch (error) {
                result.className = 'result-box';
                result.innerHTML = 'âŒ è”ç³»äººé€‰æ‹©å–æ¶ˆ';
            }
        }
        
        // å‹åŠ›æ„Ÿåº”
        function handlePressure(e) {
            e.preventDefault();
            const touch = e.originalEvent.touches[0];
            const force = touch.force || 0;
            const pressure = (force * 100).toFixed(0);
            
            $('#pressureFill').css('width', pressure + '%').text(pressure + '%');
        }
        
        // æ¸¸æˆæ‰‹æŸ„
        function connectGamepad() {
            const $info = $('#gamepadInfo');
            const $buttons = $('#gamepadButtons');
            
            window.addEventListener('gamepadconnected', (e) => {
                $info.removeClass('empty').html(`âœ… æ‰‹æŸ„å·²è¿æ¥: ${e.gamepad.id}`);
                $buttons.show();
                
                DeviceAPI.state.gamepadInterval = setInterval(() => {
                    const gamepads = navigator.getGamepads();
                    const gamepad = gamepads[0];
                    
                    if (gamepad) {
                        gamepad.buttons.forEach((button, i) => {
                            const $btn = $(`#btn${i}`);
                            if ($btn.length) {
                                if (button.pressed) {
                                    $btn.addClass('pressed');
                                } else {
                                    $btn.removeClass('pressed');
                                }
                            }
                        });
                    }
                }, 100);
            });
            
            $info.removeClass('empty').html('ğŸ® è¯·æŒ‰ä¸‹æ‰‹æŸ„ä»»æ„æŒ‰é”®...');
        }
        
        // åœ°ç†å›´æ 
        function setupGeofence() {
            const $result = $('#geofenceResult');
            
            if (!navigator.geolocation) {
                $result.removeClass('empty').html('âŒ ä¸æ”¯æŒåœ°ç†å®šä½');
                return;
            }
            
            navigator.geolocation.watchPosition(
                (position) => {
                    $result.removeClass('empty').html(`
                        âœ… å›´æ ç›‘æ§ä¸­<br>
                        ğŸ“ ä½ç½®: ${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}<br>
                        â° ${new Date().toLocaleTimeString()}
                    `);
                },
                (error) => {
                    $result.removeClass('empty').html('âŒ å®šä½å¤±è´¥');
                },
                { enableHighAccuracy: true }
            );
        }
        
        // æ¸©åº¦ä¼ æ„Ÿå™¨
        async function readTemperature() {
            const $display = $('#tempDisplay');
            const $info = $('#tempInfo');
            
            if (!('AmbientTemperatureSensor' in window)) {
                $info.removeClass('empty').html('âŒ æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒæ¸©åº¦ä¼ æ„Ÿå™¨APIï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼‰');
                // æ¨¡æ‹Ÿæ¸©åº¦
                const temp = (20 + Math.random() * 10).toFixed(1);
                $display.text(temp + 'Â°C');
                $info.html('ğŸ’¡ æ¨¡æ‹Ÿæ¸©åº¦ï¼ˆçœŸå®è®¾å¤‡å¯èƒ½æ”¯æŒï¼‰');
                return;
            }
            
            try {
                const sensor = new AmbientTemperatureSensor();
                sensor.start();
                sensor.onreading = () => {
                    $display.text(sensor.temperature.toFixed(1) + 'Â°C');
                    $info.removeClass('empty').html('âœ… æ¸©åº¦ä¼ æ„Ÿå™¨å·²æ¿€æ´»');
                };
            } catch (error) {
                $info.removeClass('empty').html('âŒ æ— æ³•è¯»å–æ¸©åº¦');
            }
        }
        
        // æ¡å½¢ç æ‰«æ
        async function scanBarcode() {
            const $scanner = $('#barcodeScanner');
            const $result = $('#barcodeResult');
            
            if (!('BarcodeDetector' in window)) {
                $result.removeClass('empty').html('âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒBarcode Detection API');
                return;
            }
            
            $scanner.show();
            $result.removeClass('empty').html('ğŸ“· æ‰«æä¸­...');
            
            setTimeout(() => {
                $scanner.hide();
                $result.html('ğŸ’¡ å®é™…åº”ç”¨éœ€é…åˆæ‘„åƒå¤´æµè¿›è¡Œå®æ—¶æ£€æµ‹');
            }, 3000);
        }
        
        // å±å¹•å½•åˆ¶
        async function startScreenRecording() {
            const $info = $('#screenRecordInfo');
            
            try {
                const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });
                DeviceAPI.state.screenRecorder = new MediaRecorder(stream);
                DeviceAPI.state.screenChunks = [];
                
                DeviceAPI.state.screenRecorder.ondataavailable = (event) => {
                    DeviceAPI.state.screenChunks.push(event.data);
                };
                
                DeviceAPI.state.screenRecorder.onstop = () => {
                    const blob = new Blob(DeviceAPI.state.screenChunks, { type: 'video/webm' });
                    $info.removeClass('empty').html(`âœ… å½•å±å®Œæˆ<br>ğŸ“¦ å¤§å°: ${(blob.size / 1024 / 1024).toFixed(2)} MB`);
                    stream.getTracks().forEach(track => track.stop());
                };
                
                DeviceAPI.state.screenRecorder.start();
                $info.removeClass('empty').html('ğŸ”´ æ­£åœ¨å½•åˆ¶å±å¹•...');
            } catch (error) {
                $info.removeClass('empty').html('âŒ å½•å±å¤±è´¥');
            }
        }
        
        function stopScreenRecording() {
            if (DeviceAPI.state.screenRecorder && DeviceAPI.state.screenRecorder.state !== 'inactive') {
                DeviceAPI.state.screenRecorder.stop();
            }
        }
        
        // æ–‡ä»¶ç³»ç»Ÿ
        async function openFilePicker() {
            const $info = $('#fileSystemInfo');
            
            try {
                const [fileHandle] = await window.showOpenFilePicker();
                const file = await fileHandle.getFile();
                
                $info.removeClass('empty').html(`
                    âœ… æ–‡ä»¶å·²é€‰æ‹©<br>
                    ğŸ“„ ${file.name}<br>
                    ğŸ“¦ ${(file.size / 1024).toFixed(2)} KB
                `);
            } catch (error) {
                $info.removeClass('empty').html('âŒ æ–‡ä»¶é€‰æ‹©å–æ¶ˆ');
            }
        }
        
        async function saveToDisk() {
            const $info = $('#fileSystemInfo');
            
            try {
                const handle = await window.showSaveFilePicker({
                    suggestedName: 'test.txt',
                    types: [{
                        description: 'Text Files',
                        accept: { 'text/plain': ['.txt'] }
                    }]
                });
                
                const writable = await handle.createWritable();
                await writable.write('Hello from H5 File System API!');
                await writable.close();
                
                $info.removeClass('empty').html('âœ… æ–‡ä»¶å·²ä¿å­˜');
            } catch (error) {
                $info.removeClass('empty').html('âŒ ä¿å­˜å–æ¶ˆ');
            }
        }
        
        // é—²ç½®æ£€æµ‹
        function detectIdle() {
            const $result = $('#idleResult');
            
            if (!('IdleDetector' in window)) {
                $result.removeClass('empty').html('âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒIdle Detection API');
                return;
            }
            
            const controller = new AbortController();
            const signal = controller.signal;
            
            IdleDetector.requestPermission().then(state => {
                if (state === 'granted') {
                    const idleDetector = new IdleDetector();
                    idleDetector.addEventListener('change', () => {
                        $result.removeClass('empty').html(`
                            ğŸ‘¤ ç”¨æˆ·çŠ¶æ€: ${idleDetector.userState}<br>
                            ğŸ–¥ï¸ å±å¹•çŠ¶æ€: ${idleDetector.screenState}
                        `);
                    });
                    idleDetector.start({ threshold: 60000, signal });
                }
            });
        }
        
        // åå°åŒæ­¥
        async function registerBackgroundSync() {
            const $result = $('#syncResult');
            
            if (!('serviceWorker' in navigator) || !('SyncManager' in window)) {
                $result.removeClass('empty').html('âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒBackground Sync API');
                return;
            }
            
            try {
                const registration = await navigator.serviceWorker.ready;
                await registration.sync.register('sync-data');
                
                $result.removeClass('empty').html('âœ… åå°åŒæ­¥ä»»åŠ¡å·²æ³¨å†Œ<br>ğŸ’¡ ç½‘ç»œæ¢å¤æ—¶å°†è‡ªåŠ¨æ‰§è¡Œ');
            } catch (error) {
                $result.removeClass('empty').html('âŒ æ³¨å†Œå¤±è´¥');
            }
        }
    </script>
</body>
</html>